[pytest]
# Test discovery and execution
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Logging configuration
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(message)s (%(filename)s:%(lineno)s)
log_cli_date_format = %Y-%m-%d %H:%M:%S

# Test markers
markers =
    integration: mark test as integration test
    slow: mark test as slow running
    gpu: mark test as requiring GPU
    medical: mark test as requiring medical domain knowledge

# Test selection options
addopts = 
    --verbose
    --strict-markers
    --tb=short
    --cov=src/oncology
    --cov-report=term-missing
    --cov-report=html:reports/coverage
    --junitxml=reports/junit.xml
    -p no:warnings

# Coverage settings
[coverage:run]
source = src/oncology
omit =
    */tests/*
    */__init__.py

[coverage:report]
exclude_lines =
    pragma: no cover
    def __repr__
    raise NotImplementedError
    if __name__ == .__main__.:
    pass
    raise ImportError

# Environment variables for tests
[test:env]
OPENROUTER_API_KEY = test_key
CACHE_DIR = tests/test_cache
LOG_LEVEL = DEBUG

# Custom test settings
[oncology:test]
# Timeouts (seconds)
api_timeout = 30
cache_timeout = 3600
test_timeout = 300

# Performance thresholds
min_accuracy = 0.90
min_confidence = 0.85
max_latency = 5.0

# Test data paths
sample_data_dir = tests/sample_data
test_output_dir = tests/test_output
test_cache_dir = tests/test_cache

# Model settings for testing
test_models = 
    medical_expert
    image_analyst
    genomics_expert

# Task types for testing
test_tasks =
    diagnosis
    pathology_review
    radiology_review
    genomic_analysis

# Validation thresholds
confidence_threshold = 0.85
evidence_threshold = 2
max_uncertainty = 0.15

# Cache settings for tests
max_cache_size = 1073741824  # 1GB
cache_cleanup_threshold = 0.9  # 90% full triggers cleanup

# Concurrent test settings
max_workers = 4
max_concurrent_tasks = 3

# Report generation settings
report_formats = 
    html
    junit
    coverage